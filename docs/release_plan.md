# 项目发布计划

## 当前项目状态

项目目前处于开发阶段，版本号为 v0.1.3，尚未达到可以正式发布稳定版本的阶段。

当前版本标签：
- v0.1.0: 项目初始重构版本
- v0.1.1: 修复配置文件读取和查询语句生成问题
- v0.1.2: 修复对账单中每日用量明细工作表不能写入多个油品的问题
- v0.1.3: 添加缺陷修复记录文件

## 何时启用 Releases

### Releases 启用条件

Releases 功能应该在以下条件全部满足时启用：

1. **功能完整性**
   - 核心功能全部实现并通过测试
   - 对账单生成功能完善，能够正确处理各种场景
   - Excel 报表生成稳定，格式正确
   - 数据库连接和查询功能稳定可靠

2. **质量保证**
   - 通过全面的单元测试，测试覆盖率达到 80% 以上
   - 通过集成测试，确保各模块协同工作正常
   - 无严重或关键级别的已知缺陷
   - 性能表现满足预期要求

3. **文档完善**
   - 用户手册完整，包含详细的使用说明
   - 技术文档齐全，便于开发者理解和维护
   - API 文档（如适用）完整准确
   - 构建和部署文档完整

4. **部署准备**
   - 部署流程已验证并文档化
   - 环境配置说明完整
   - 回滚计划已制定

### 建议的 Releases 时间点

#### v1.0.0 正式版
预计在以下条件满足时发布：
- 所有核心功能实现并通过测试
- 至少 2 周的内部测试和试用期
- 文档完整且经过验证
- 至少 1 个真实客户环境的测试验证

#### 后续版本计划
- **v1.1.0**: 添加新功能和改进
- **v1.2.0**: 性能优化和用户体验改进
- **v2.0.0**: 重大功能更新（如果有不兼容的变更）

## 发布流程

### 预发布检查清单
- [ ] 所有计划功能已完成
- [ ] 通过所有测试用例
- [ ] 文档已更新并验证
- [ ] 版本号已正确设置
- [ ] CHANGELOG 已更新
- [ ] README 已更新
- [ ] 构建脚本可正常工作

### 发布步骤
1. 在 master 分支创建发布候选版本
2. 进行全面测试
3. 使用 [build_package.py](file://D:\Daily_Report\build_package.py) 构建发行版
4. 创建 GitHub Release
5. 打上版本标签
6. 通知相关团队和用户
7. 监控发布后的反馈

## 分支管理策略

### 主要分支
- **master**: 稳定版本，用于发布正式版本
- **development**: 开发分支，用于日常开发
- **release/x.y.z**: 发布分支（在需要时创建）

### 版本标签
- 使用语义化版本控制（SemVer）
- 主版本号变更表示不兼容的API变更
- 次版本号变更表示向后兼容的功能性新增
- 修订号变更表示向后兼容的问题修复

## 构建和分发

项目使用 [build_package.py](file://D:\Daily_Report\build_package.py) 脚本进行构建，支持两种发行版：
1. 标准发行版：使用现代 Python 构建工具创建 wheel 和源码包
2. 冻结依赖发行版：创建包含所有项目文件和冻结依赖的完整发行版

构建产物可用于不同场景的部署和分发。

## 风险评估

### 当前风险
1. **功能风险**: 对账单功能尚未完全验证
2. **性能风险**: 大数据量处理性能尚未测试
3. **兼容性风险**: 不同环境下的兼容性尚未全面验证
4. **构建风险**: 构建脚本在不同环境下的兼容性尚未全面验证

### 风险缓解措施
1. 增加测试覆盖范围
2. 进行多环境测试
3. 建立监控和反馈机制
4. 验证构建脚本在不同环境下的兼容性

## 结论

基于项目当前的状态，建议在以下情况下启用 Releases：

1. 完成所有核心功能开发和测试
2. 通过至少 2 周的内部测试期
3. 完成文档编写和验证
4. 在至少 1 个真实客户环境中验证通过

预计在上述条件满足后，可以发布 v1.0.0 正式版本，并正式启用 Releases 功能。