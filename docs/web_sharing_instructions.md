# Web应用分享配置指南

本文档详细说明如何将ZR Daily Report Web应用配置为可从其他设备访问。

## 已完成的配置修改

1. 已将应用的监听地址从本地回环地址(`127.0.0.1`)修改为通配符地址(`0.0.0.0`)，这样应用将监听服务器上的所有网络接口。

## 手动配置Windows防火墙

由于添加防火墙规则需要管理员权限，请按照以下步骤详细操作：

### 通过管理员PowerShell添加规则

1. **以管理员身份打开PowerShell**：
   - 点击开始菜单
   - 输入"PowerShell"
   - 右键点击"Windows PowerShell"
   - 选择"以管理员身份运行"
   - 出现用户账户控制(UAC)提示时，点击"是"

2. **执行以下命令添加防火墙规则**：
   ```powershell
   New-NetFirewallRule -DisplayName "允许8000端口访问 (ZR Daily Report)" -Direction Inbound -Protocol TCP -LocalPort 8000 -Action Allow
   ```

3. **验证规则是否添加成功**：
   ```powershell
   Get-NetFirewallRule -DisplayName "允许8000端口访问 (ZR Daily Report)"
   ```
   如果返回规则信息，表示添加成功。

### 图形界面添加规则（推荐给不熟悉命令行的用户）

1. 打开控制面板 > 系统和安全 > Windows Defender 防火墙
2. 点击"高级设置"
3. 右键点击"入站规则"，选择"新建规则"
4. 选择"端口"，点击下一步
5. 选择"TCP"，输入"8000"作为特定本地端口，点击下一步
6. 选择"允许连接"，点击下一步
7. 确保所有网络类型都被选中，点击下一步
8. 输入名称"允许8000端口访问 (ZR Daily Report)"，点击完成

### 解决常见错误

如果遇到"拒绝访问"或"Windows System Error 5"错误：
- 确保您**确实以管理员身份**运行PowerShell
- 检查您的用户账户是否具有管理员权限
- 如果仍然无法添加规则，可以使用图形界面方法代替

## 启动应用

1. 确保所有修改已保存
2. 启动应用：
   ```powershell
   python src/main.py
   ```

## 获取主机IP地址

1. 在命令提示符或PowerShell中执行：
   ```powershell
   ipconfig | findstr "IPv4 Address"
   ```
2. 记录显示的IPv4地址，例如：`192.168.1.4`

## 从其他设备访问

1. 确保其他设备与服务器在同一网络中
2. 在其他设备的浏览器中输入：
   ```
   http://[服务器IP地址]:8000
   ```
   例如：`http://192.168.1.4:8000`

## 测试验证

1. 从服务器本地访问 `http://127.0.0.1:8000` 确认应用正常运行
2. 从同一网络中的其他设备访问 `http://[服务器IP地址]:8000`
3. 如果无法访问，请检查：
   - 防火墙规则是否正确添加
   - 网络连接是否正常
   - 服务器IP地址是否正确
   - 应用是否正常运行

## 注意事项

1. 确保您的网络环境安全，避免在公共网络上暴露应用
2. 此配置仅适用于内部网络使用
3. 生产环境部署应考虑更严格的安全措施和反向代理配置